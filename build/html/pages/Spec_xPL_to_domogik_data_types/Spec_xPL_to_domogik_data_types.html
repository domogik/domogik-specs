

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>xPL to Domogik data types transcoding &mdash; Domogik specifications 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Domogik specifications 0.1 documentation" href="../../index.html" />
    <link rel="next" title="Generate XPL messages from the DB" href="../Spec_xplFromDb/Spec_xplFromDb.html" />
    <link rel="prev" title="How to secure UI+REST API access" href="../Spec_security_ui/Spec_security_ui.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../Spec_xplFromDb/Spec_xplFromDb.html" title="Generate XPL messages from the DB"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../Spec_security_ui/Spec_security_ui.html" title="How to secure UI+REST API access"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Domogik specifications 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="xpl-to-domogik-data-types-transcoding">
<h1>xPL to Domogik data types transcoding<a class="headerlink" href="#xpl-to-domogik-data-types-transcoding" title="Permalink to this headline">¶</a></h1>
<p>The current model stores the values directly from the xPL to the database.
The interpretation (On/Off, Up/Down) is deducted from the usage associated to the device.</p>
<p>Current model problems:</p>
<ul class="simple">
<li>Without minimal control, the values format in the database can be anything. And the UI needs to know and handle all possible formats.</li>
<li>The usage (so the interpretation) is associated to a device, but some devices have multiples outputs, and each output can be dedicated to a specific usage.</li>
<li>When adding an usage, each widget should be modified to take the new usage in account (new interpretations).</li>
</ul>
<div class="section" id="new-model">
<h2>New Model<a class="headerlink" href="#new-model" title="Permalink to this headline">¶</a></h2>
<p>The new model will consist of 3 main modifications:</p>
<ul class="simple">
<li>Extending feature types to Domogik data types</li>
<li>Create transcoding functions to convert techno values to unified values based on Domogik data types</li>
<li>Update the RINOR to process the transcoding</li>
</ul>
<div class="section" id="domogik-data-types">
<h3>Domogik data types<a class="headerlink" href="#domogik-data-types" title="Permalink to this headline">¶</a></h3>
<p>The Domogik data types are going to be based on a simplified version of the KNX Data Point Types.
(list to do)
!!!!Values transcoding functions
As in KNX value will require some more complex processing, the conversion table is not enough.
We will need 2 Python functions per techno+type :</p>
<ul class="simple">
<li>A function from the techno value to the unified value (typically when an event is received)</li>
<li>A function from the unified value to the techno value (typically when a command is sent from the UI)</li>
</ul>
<p>The functions will be stored to the XML file:</p>
<div class="highlight-json"><pre>&lt;transcode from='techno' type='DT_Switch'&gt;
def transcode(value):
    ...
    return trancoded_value
&lt;/transcode&gt;</pre>
</div>
<p>~~#F00:Fritz : I don&#8217;t agree with that. Storing functions in xml is a bad idea : it would be best to have python functions that deduce what to do from xml file~~</p>
</div>
<div class="section" id="rinor-transcoding-process">
<h3>RINOR transcoding process<a class="headerlink" href="#rinor-transcoding-process" title="Permalink to this headline">¶</a></h3>
<p>The transcoding process will require 4 steps:</p>
<p># Use the XML to identify keys and values
# Retrieve the feature id and type
# Transcode the value using the transcoding function
# Store the transcoded value into the database</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">xPL to Domogik data types transcoding</a><ul>
<li><a class="reference internal" href="#new-model">New Model</a><ul>
<li><a class="reference internal" href="#domogik-data-types">Domogik data types</a></li>
<li><a class="reference internal" href="#rinor-transcoding-process">RINOR transcoding process</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../Spec_security_ui/Spec_security_ui.html"
                        title="previous chapter">How to secure UI+REST API access</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../Spec_xplFromDb/Spec_xplFromDb.html"
                        title="next chapter">Generate XPL messages from the DB</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/pages/Spec_xPL_to_domogik_data_types/Spec_xPL_to_domogik_data_types.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../Spec_xplFromDb/Spec_xplFromDb.html" title="Generate XPL messages from the DB"
             >next</a> |</li>
        <li class="right" >
          <a href="../Spec_security_ui/Spec_security_ui.html" title="How to secure UI+REST API access"
             >previous</a> |</li>
        <li><a href="../../index.html">Domogik specifications 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Domogik team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>