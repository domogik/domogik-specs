

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>python-openzwave &mdash; Domogik specifications 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Domogik specifications 0.1 documentation" href="../../index.html" />
    <link rel="next" title="Plugin for the RFXCOM Usb Model" href="../plugin_rfxcom/plugin_rfxcom.html" />
    <link rel="prev" title="PLCBUS plugin" href="../plugin_plcbus/plugin_plcbus.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../plugin_rfxcom/plugin_rfxcom.html" title="Plugin for the RFXCOM Usb Model"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../plugin_plcbus/plugin_plcbus.html" title="PLCBUS plugin"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Domogik specifications 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="python-openzwave">
<h1>python-openzwave<a class="headerlink" href="#python-openzwave" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<div class="section" id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>this not a plugin, but an external library for zwave plugin, is based on <a class="reference external" href="https://code.google.com/p/python-openzwave/">python-openzwave|nocache</a> software.</p>
<p>python-openzawe and <a class="reference external" href="http://code.google.com/p/open-zwave/">openzawe|nocache</a> are in hight development, by two different teams, so installing it can be sometimes not so easy. So we propose you different methods to install it
History
<strong>****</strong></p>
<p>The original script <a class="reference external" href="https://github.com/maartendamen/py-openzwave">py-openzwave|nocache</a> was from maarten damen ~~#F03:and is no longer compatible with ozwave plugin~~</p>
<blockquote>
<div>Prerequisite</div></blockquote>
<hr class="docutils" />
<p>if not installed, install the following packages:
* g++
* libudev-dev
* python-dev
* python-setuptools
* cython(at least 0.14.1)
* python-louie
* python-sphinx to make the documentation</p>
<p>You must install mercurial and subversion to get sources of python-openzwave and openzwave. Look at the documentation of your Linux distribution to do them.</p>
</div>
<div class="section" id="install-python-openzwave-the-official-way">
<h2>Install python-openzwave, the official way<a class="headerlink" href="#install-python-openzwave-the-official-way" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Get the sources, clone the hg repo:</li>
</ul>
<blockquote>
<div><div class="highlight-json"><pre>$hg clone https://code.google.com/p/python-openzwave/{CODE}

Automatic installation
***********************

* You can build python-openzwave with the install.sh script.
Enter the python-openzwave directory</pre>
</div>
<div class="highlight-json"><pre>$cd python-openzwave{CODE}</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>then use the provided scipt to compile</dt>
<dd><div class="first highlight-json"><pre>$./update.sh{CODE}</pre>
</div>
<div class="last highlight-json"><pre>$./compile.sh{CODE}</pre>
</div>
</dd>
</dl>
<ul class="simple">
<li>If the build process succeed, run the following command to install</li>
</ul>
<blockquote>
<div><div class="highlight-json"><pre>$sudo python setup.py install{CODE}
That's all (:cool:)

 Manual installation
*********************

* Retrieve the sources of openzwave :</pre>
</div>
<div class="highlight-json"><pre>$svn checkout http://open-zwave.googlecode.com/svn/trunk/ openzwave{CODE}</pre>
</div>
</div></blockquote>
<ul class="simple">
<li>Build openzwave</li>
</ul>
<blockquote>
<div><div class="highlight-json"><pre>$cd openzwave/cpp/build/linux
$make
$cd ../../../..</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt><a href="#id1"><span class="problematic" id="id2">*</span></a>Build python-openzwave</dt>
<dd><div class="first highlight-json"><pre>$python setup.py build{CODE}
*And install it if compilation succeed</pre>
</div>
<div class="last highlight-json"><pre>$sudo python setup.py install{CODE}</pre>
</div>
</dd>
</dl>
<div class="section" id="installation-on-debian-ubuntu">
<h3>Installation on debian/ubuntu<a class="headerlink" href="#installation-on-debian-ubuntu" title="Permalink to this headline">¶</a></h3>
<p>You need to compile and install openzwave as a package to generate python-openzwave.
<a href="#id3"><span class="problematic" id="id4">*</span></a>After that, make the python-openzwave package
.. code-block:: json</p>
<blockquote>
<div>$dpkg-buildpackage -rfakeroot{CODE}
You can now install the package with</div></blockquote>
<div class="highlight-json"><pre>$sudo dpkg -i python-openzwave*.deb{CODE}</pre>
</div>
<p>API documentation is in /usr/share/doc/python-openzwave</p>
<blockquote>
<div>Static vs dynamic (or shared)</div></blockquote>
<hr class="docutils" />
<p>The openzwave (c++) lib needs to run as a singleton : it means that it
MUST have only one instance of the manager running on your computer.</p>
<p>There is 2 ways of linking libraries with a program :
<a href="#id5"><span class="problematic" id="id6">*</span></a>static : includes a copy of the library in your binary program. This means
that your program has its own instance of the library. This the way the
install.sh runs. So you CAN&#8217;T have another program (like the control-panel)
running when using the python-openzwave library</p>
<p><a href="#id7"><span class="problematic" id="id8">*</span></a>dynamic or shared : includes a link to the library in your binary program.
This means that your program share the library with other programs. In this
case, the instance is owned directly by the library. This the way the
debian package works. So you CAN have another program running when
using the python-openzwave library. Of course, this program MUST use
the shared library.</p>
</div>
</div>
<div class="section" id="generate-some-documentation">
<h2>Generate some documentation<a class="headerlink" href="#generate-some-documentation" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>using the command :</dt>
<dd><div class="first last highlight-json"><pre>$./make_doc.shcompil openzwave{CODE}

There is a copy of the openzwave's directory in /usr/local/share/python-openzwave
API documentation is in /usr/local/share/doc/python-openzwave

How to check python-openzwave
==============================</pre>
</div>
</dd>
</dl>
<div class="highlight-json"><pre>   ./examples/api_demo.py



Creating the zwave device controller</pre>
</div>
<hr class="docutils" />
<dl class="docutils">
<dt>We need to create an udev rule in order to create the device /dev/zwave</dt>
<dd>check your device</dd>
</dl>
<hr class="docutils" />
<p>I suppose your zwave controller is at /dev/ttyUSB0</p>
<div class="highlight-json"><pre>$ udevadm info --name=/dev/ttyUSB0 --attribute-walk{CODE}
locate your  idVendor and idProdroduct
in /etc/udev/rules.d, create a file zwave.rules, and write the following rule

ie, for aeon stick</pre>
</div>
<div class="highlight-json"><pre>   SUBSYSTEMS=="usb", ATTRS{idVendor}=="10c4", ATTRS{idProduct}=="ea60", SYMLINK+="zwave", MODE="0666"{CODE}


Install openzwave control-panel</pre>
</div>
<hr class="docutils" />
<p>In order to identify your network and collect the NodeID of your devices, we recommend to use the openzwave-control-panel</p>
<div class="highlight-json"><pre>$ln -s open-zwave-read-only open-zwave {CODE}

Compile libmicrohttpd, needed by openzwave-control-panel. Don’t use the libmicrohttpd provided by your distribution. The compilation of the openzwave-control-panel will fail otherwise!
Respect carefully the folder location; ie openzwave, libmicrohttpd, and openzwave-control-panel must have the same parent directory.</pre>
</div>
<div class="highlight-json"><pre>$wget ftp://ftp.gnu.org/gnu/libmicrohttpd/libmicrohttpd-0.9.19.tar.gz
$tar zxvf libmicrohttpd-0.9.19.tar.gz
$mv libmicrohttpd-0.9.19 libmicrohttpd
$cd libmicrohttpd
$./configure
$make
$sudo make install
$cd ~</pre>
</div>
<p>Compile openzwave-control-panel</p>
<div class="highlight-json"><pre>$svn checkout http://openzwave-control-panel.googlecode.com/svn/trunk/ openzwave-control-panel
$cd openzwave-control-panel</pre>
</div>
<div class="highlight-json"><pre>$nano Makefile{CODE}

Change the following lines to:
for Linux uncomment out next two lines</pre>
</div>
<div class="highlight-json"><pre>LIBZWAVE := $(wildcard $(OPENZWAVE)/cpp/lib/linux/*.a)
LIBUSB := -ludev</pre>
</div>
<p>Compile:</p>
<div class="highlight-json"><pre>$make{CODE}

ozwcp require acces to the config dir of ozw</pre>
</div>
<div class="highlight-json"><pre>$ln -s ../open-zwave/config config
$ chmod -R 777 config</pre>
</div>
<p>To start the openzwave-control-panel, type;
.. code-block:: json</p>
<blockquote>
<div><p>$./ozwcp -d -p 1234{CODE}</p>
<p>Point your browser to <a class="reference external" href="http://openzwave-machinename:1234/">http://openzwave-machinename:1234/</a></p>
<p>source: <a class="reference external" href="http://www.strengholt-online.nl/howto-compile-open-zwave-and-openzwave-control-panel-on-ubuntu/">http://www.strengholt-online.nl/howto-compile-open-zwave-and-openzwave-control-panel-on-ubuntu/</a></p>
<blockquote>
<div>Developer resources</div></blockquote>
<p>For developing you can access to python-openzwave dev, instructions here :</p>
<p><a class="reference external" href="http://bibi21000.gallet.info/index.php/en/home-automation-uk/124-openzwave-vs-python-reloaded.html">http://bibi21000.gallet.info/index.php/en/home-automation-uk/124-openzwave-vs-python-reloaded.html</a></p>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">python-openzwave</a><ul>
<li><a class="reference internal" href="#purpose">Purpose</a></li>
<li><a class="reference internal" href="#install-python-openzwave-the-official-way">Install python-openzwave, the official way</a><ul>
<li><a class="reference internal" href="#installation-on-debian-ubuntu">Installation on debian/ubuntu</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generate-some-documentation">Generate some documentation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../plugin_plcbus/plugin_plcbus.html"
                        title="previous chapter">PLCBUS plugin</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../plugin_rfxcom/plugin_rfxcom.html"
                        title="next chapter">Plugin for the RFXCOM Usb Model</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/pages/plugin_pyozw/plugin_pyozw.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../plugin_rfxcom/plugin_rfxcom.html" title="Plugin for the RFXCOM Usb Model"
             >next</a> |</li>
        <li class="right" >
          <a href="../plugin_plcbus/plugin_plcbus.html" title="PLCBUS plugin"
             >previous</a> |</li>
        <li><a href="../../index.html">Domogik specifications 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Domogik team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>